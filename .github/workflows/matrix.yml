name: Simple Matrix with Exclude

on:
  workflow_dispatch:
    inputs:
      env_list:
        description: "Lista de entornos como JSON (ej: [\"dev1\",\"dev2\",\"dev3\"]). Vac√≠o para usar default."
        required: false
        default: '["dev1","dev2","dev3","dev4","dev5","dev6","dev7","dev8","dev9","dev10","dev11","dev12","dev13","dev14","dev15","dev16","dev17","dev18","dev19","dev20","dev21","dev22","dev23","dev24","dev25","dev26","dev27","dev28","dev29","dev30","dev31","dev32","dev33","dev34","dev35","dev36","dev37","dev38","dev39","dev40","dev41","dev42","dev43","dev44","dev45","dev46","dev47","dev48","dev49","dev50"]'
      exclude_list:
        description: "Lista de entornos a excluir como JSON (ej: [{\"env\":\"dev2\"},{\"env\":\"dev4\"}])"
        required: false
        default: '[]'

jobs:
  test-matrix:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 4
      matrix:
        env: ${{ fromJSON(github.event.inputs.env_list) }}
        exclude: ${{ fromJSON(github.event.inputs.exclude_list) }}
    steps:
      - name: Show matrix values
        run: |
          echo "Running on env: ${{ matrix.env }}"
