name: Simple Matrix with Exclude

on:
  workflow_dispatch:
    inputs:
      env_list:
        description: "Lista de entornos como JSON (ej: [\"dev1\",\"dev2\",\"dev3\"]). Vac√≠o para usar default."
        required: false
        default: '["dev1","dev2","dev3","dev4","dev5"]'
      exclude_list:
        description: "Lista de entornos a excluir como JSON (ej: [{\"env\":\"dev2\"},{\"env\":\"dev4\"}])"
        required: false
        default: '[]'

jobs:
  test-matrix:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 4
      matrix:
        env: ${{ fromJSON(github.event.inputs.env_list) }}
        exclude: ${{ fromJSON(github.event.inputs.exclude_list) }}
    steps:
      - name: Show matrix values
        run: |
          echo "Running on env: ${{ matrix.env }}"
