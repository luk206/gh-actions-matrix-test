name: Simple Matrix with Exclude

on:
  workflow_dispatch:
    inputs:
      project_list:
        description: "Lista de projectos como JSON (ej: [\"dev1\",\"dev2\",\"dev3\"]). Vac√≠o para usar default."
        required: false
        default: '["1000-533","1000-537","1000-538","1000-540","1000-541","1000-541","1000-542","1000-545","1000-549","1000-549","1000-550","1000-551","1000-552","1000-552","1000-553","1000-553","1000-553","1000-554","1000-555","1000-556","1000-558","1000-663","1000-668","1000-670","1000-671","1000-676","1000-677","1000-678","1000-679","1000-682","1000-683","1000-685","1000-692","1000-693","1000-696","1000-697","1000-699","1000-700","1000-701","1000-702","1000-704","1000-705","1000-707","1000-708","1000-709","1000-711","1000-712","1000-712","1000-712","1000-713","1000-714","1000-716","1000-717","1000-719","1000-721","1000-723","1000-724","1000-725","1000-728","1000-732","1000-734","1000-736","1000-737","1000-739","1000-740","1000-742","1000-744","1000-744","1000-749","1000-752","1000-752","1000-755","1000-756","1000-757","1000-758","1000-759","1000-761","1000-763","1000-765","1000-766","1000-768","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-001","3000-100","3000-102","3000-103","3000-104","3000-105","3000-107","3000-108","3000-110","3000-111","3000-112","3000-112","3000-112","3000-113","3000-114","3000-115","3000-116","3000-119","3000-120"]'
      exclude_list:
        description: "Lista de entornos a excluir como JSON (ej: [{\"project\":\"1000-537\"},{\"project\":\"1000-540\"}])"
        required: false
        default: '[{"project":"1000-537"},{"project":"1000-540"}]'

jobs:
  test-matrix:
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 4
      matrix:
        project: ${{ fromJSON(github.event.inputs.project_list) }}
        exclude: ${{ fromJSON(github.event.inputs.exclude_list) }}
    steps:
      - name: Show matrix values
        run: |
          echo "Running on project: ${{ matrix.project }}"
